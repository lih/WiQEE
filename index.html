<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Marc Coiffier" />
  <title>WiQEE : A Wiki for mathematical proofs</title>
  <style type="text/css">
    code{white-space: pre;}
    #capricon-prelude { display: none; }
    .capricon-output { display: inline-block; }
    .capricon-hide + .capricon-hidestache::before {
	content: "";
	width: 0.5em; height: 0.5em; display: inline-block;
	position: relative; bottom: 0.3em;
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAgCAQAAABNlRuNAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfiCR0AADLw7KyaAAAB3UlEQVQ4y43UPUhVYRzH8c99scTMLAkkySx0MNOipfeW2iqa2xrEGgIpjQY3l4YwIxJ6gbaWpIZAC1oaggoiJKgsjODSGxJBwaUyb09Dp8O9ei6c3/Q8P/j+n//bORnptUm/4Gw+NdDpsl1KPqYF6twQBMHtbEpkr0PRqZivEnOfRhO+RveMw5aDec+SgHojiuYNxk7egBl/BG/1JCH95v5lbUmZ2+6UR4blFgPtpv8XGiNtOmXRpCHpjRMREJyLnJwxBVfsVqVZQ74LgqKDkdMavTuuNhmpt981H0xqjJz1ZgQlfdVG1oisHp2xl3PMQ6OakpFeD5y0YYGb0aCmWlL3BMFdq1RVZQ/qrAHvfJNSeUM+eWxr7DRoSRpeuWp1aYlv20166UjaF+kyFVVWlw5Y6nq0BU+sTC6/RlNF1lvi6X/xMwlpdcF9x8tC7LA6Oj31Y3ESTW4Jgueayyo5741g1rakvAeUBEFBR4XfbtBAxVcTqSXqTPAiGiUb9euWJXnhD/gVITfjiMOCgtG4ngXlTxszI5h3xxxYZifW2iNTfQodTrsYr3eNq4LfZT+MCjU7qluGivVe54w+K5KRXkUFl7RJrXFB8NnmtEDWeyVMeJUWyXmtZMqI2bTIX4FHiXN3BEaSAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA5LTI4VDIzOjM0OjE0KzAyOjAw5BdphAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wOS0yOFQyMjowMDo1MCswMjowMKjQ5C8AAAAASUVORK5CYII=);
	background-size: 100% 100%;
	background-repeat: none;
	padding: 0.2em;
	border: 1px solid rgba(255,255,255,0);
    }
  </style>
  <noscript>
    <style>.interactive { display: none !important; }</style>
  </noscript>
  <link rel="stylesheet" href="style.css" />
  <script src="mathjax/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
  <link rel="icon" type="image/png" href="favicon.png" />
  <!-- <script src="WiQEE.js"></script> -->
  <script src="WiQEE.js"></script>
  <script src="theme-tweak.js"></script>
</head>
<body class="ground-light primary">
<div id="content-frame" class="frame"><div class="nav header reverse">
    <span class="menu left"><a href="index.html">WiQEE</a><ul>
  	<li><a href="lexicon.html">Lexicon</a></li>
    </ul></span><span class="menu middle"><a class="#">WiQEE : A Wiki for mathematical proofs</a>
            <ul>
      <li><a href="#literate-programming-in-wiki-form">Literate Programming in Wiki Form</a></li>
      <li><a href="#a-concatenative-scripting-language">A Concatenative Scripting Language</a></li>
      <li><a href="#proofs-with-prismatic-constructions">Proofs With Prismatic Constructions</a></li>
      <li><a href="#contributing-to-wiqee-or-creating-your-own">Contributing to WiQEE, or creating your own</a></li>
      <li><a href="#example-pages">Example pages</a></li>
      </ul>
          </span><span class="menu right"><a href="#">More...</a><ul>
	<li><a href="https://github.com/lih/WiQEE-pages/edit/master/index.md">Page source</a></li>
	<li><a href="index.pdf">PDF version</a></li>
	<li><a href="#" onclick="document.getElementById('body-theme-chooser').classList.toggle('active')">Tweak theme</a></li>
      </ul></span>
  </div><div id="content-scroll"><div id="content" class="sheet" tabindex="1">
      <h1>WiQEE : A Wiki for mathematical proofs</h1>
<p>The Quod Erat Edificandum Wiki – WiQEE for short – is a mix of two ideas. First of all, it is a documentation platform, whose main content is the articles written by its contributors. Secondly, it aims to become a formally-verified library of mathematical proofs and programs, that can be extracted to executable form, or composed together to prove more complicated theories.</p>
<p>Every page on this wiki is generated from a source file, written in a language called CaPriCon. The source of a page can be downloaded from its menu. If you want to know how the sausage gets made, I invite you to take a look at <a href="index.md">this index’s source</a> for an example of such source files.</p>
<p>If you do so, you may notice that the source doesn’t look that different from the article itself. That is because CaPriCon is an exclusively <a href="https://en.wikipedia.org/wiki/Literate_programming">literate programming language</a>, in which most text is simply text, and the code is specially identified through dedicated syntaxes. The comment formatting language itself is Markdown in this case, although it would be trivial to adapt it to other textual markup languages such as TeX.</p>
<h2 id="literate-programming-in-wiki-form">Literate Programming in Wiki Form</h2>
<p>Everything you’ve read until now is a comment of the “index.md” program. If you want to write programs, though, you will probably need to write some <em>code</em>, which in this case consists in a sequence of <em>steps</em> that are executed in the order in which they appear. The first sort of code that you can execute is a code paragraph, and is indicated in the source by starting a line with <code>&gt;</code>.</p>
<label class="expansible box"><input type="checkbox" checked="checked" /><span class="expand-else capricon-show"></span><span class="expand-then capricon-hide"></span><span class="expand-then" style="--num-lines: 4.25">
<div class="capricon-steps">
<pre class="capricon capricon-paragraph capricon-context"><span class="symbol" data-symbol-name="&quot;&lt;p&gt;Such code is executed, and its output is added to the document.&lt;/p&gt;&quot;">&quot;&lt;p&gt;Such code is executed, and its output is added to the document.&lt;/p&gt;&quot;</span> <span class="symbol" data-symbol-name="printf">printf</span></pre>
<div class="capricon-examples">
<button class="capricon-example" data-code="version &quot;CaPriCon version: %s\n&quot; printf">
<pre class="capricon"><span class="symbol" data-symbol-name="version">version</span> <span class="symbol" data-symbol-name="&quot;CaPriCon version: %s\n&quot;">&quot;CaPriCon version: %s\n&quot;</span> <span class="symbol" data-symbol-name="printf">printf</span></pre>
</button>
<button class="capricon-example" data-code="&quot;Hello&quot; printf">
<pre class="capricon"><span class="symbol" data-symbol-name="&quot;Hello&quot;">&quot;Hello&quot;</span> <span class="symbol" data-symbol-name="printf">printf</span></pre>
</button>
</div>
<div class="user-input interactive">
<button class="capricon-trigger">
Try It Out
</button>
<label class="capricon-input-prefix">&gt; <input type="text" class="capricon-input" /></label>
<pre class="capricon-output"></pre>
</div>
</div>
</span></label>
<div class="capricon-paragraphresult">
<p>
Such code is executed, and its output is added to the document.
</p>
</div>
<p>You can also write some inline code between “mustaches” (a mustache is a pair of nested <code>{}</code> inside the source), which will be executed as part of a paragraph, and whose output <label class="expansible inline"><span>will look like this </span><input type="checkbox"><span class="expand-then"><code class="capricon capricon-steps"><span class="symbol" data-symbol-name="&quot;will look like this&quot;">“will look like this”</span> <span class="symbol" data-symbol-name="raw">raw</span></code></span></label>. If all works well, you should see a small image of steps next to the generated output. Clicking on those steps will, as in the previous case and without surprises, show you the steps that were taken to produce this output.</p>
<h2 id="a-concatenative-scripting-language">A Concatenative Scripting Language</h2>
<p>If you peeked at the examples given before, you may have noticed something strange. In order to produce some output, you’d expect a sentence to look like <code>print "..."</code>, but instead the program was written in the reverse order, as <code>"..." print</code>.</p>
<p>Indeed, in the tradition of PostScript, CaPriCon is a concatenative, stack-based language. In such a language, programs are represented as sequences of symbols, that are executed from first to last, and that may keep intermediate results on a shared stack. All the power of the language comes from the words that are made available, rather than from the particular syntax of those words.</p>
<p>Concatenative languages have a few interesting properties that make them perfect candidates for integration into a literate environment like the one CaPriCon provides :</p>
<ul>
<li><p><em>simplicity :</em> every program is only a sequence of words that are evaluated in order, nothing more. You don’t have to learn any fancy syntax, only the words and what they mean.</p>
<p>The CaPriCon language only has ~50 basic words in its vocabulary, which are referenced <a href="lexicon.html">in this lexicon</a>. Beyond that, you can define your own words by composing the existing ones into so-called “quotes”, written <code>{ word1..wordn }</code>.</p></li>
<li><p><em>exploration :</em> concatenative languages are very well-suited to implement incremental development environments, in which you can devise programs (and proofs) by walking through their execution step by step, with complete control and visibility over the state of the environment at every stage.</p>
<p>To experience this process of exploration, you can install the interactive CaPriCon interpreter (for <a href="https://github.com/lih/BHR/releases/download/release-capricon-0.13/capricon.linux.x86_64.tar.xz">Linux</a> or <a href="https://github.com/lih/BHR/releases/download/release-capricon-0.13/capricon.osx.x86_64.tar.xz">OSX</a>), that is used to power this site. This interpreter can be run as-is, but it is usually preferrable to load a <em>prelude</em> before any useful interaction can occur.</p>
<p>A prelude is simply a file containing the basic definitions needed to write simple programs. Without one, you’re left with the basic functions, which require you to be much more verbose. The default CaPriCon prelude can be found in the above packages, under the name “prelude”.</p></li>
</ul>
<p>If you still aren’t quite sure how to go about writing your own scripts, <a href="capricon-tutorial.html">this tutorial</a> may help walk you through the first hurdles.</p>
<h2 id="proofs-with-prismatic-constructions">Proofs With Prismatic Constructions</h2>
<p>While CaPriCon can be a decent addition to a documentation format, it was first designed as an interactive interface for the construction of proof terms, described in the Calculus of Prismatic Constructions (hence the name CaPriCon), which is an extension of the basic CoC with a lifting operator for naturally inductive values.</p>
<p>That operator is called <span class="math inline">\(\mu\)</span>, and it works by projecting inductive values onto a larger version of themselves, universe-wise. For example, given the “inductive” type <span class="math inline">\(Id := \forall T:Set_n, T \rightarrow T\)</span>, and a hypothesis <span class="math inline">\(id : Id\)</span>, <span class="math inline">\(\mu(id)\)</span> represents a computationally sound proof of <span class="math inline">\(\forall (T^*:Id \rightarrow Set_{n+1}), T^*\ (\lambda (T:Set_n) (t:T), t) \rightarrow T^*\ id\)</span>. Each branch of the base inductive type is “projected” through <span class="math inline">\(\mu\)</span> to a parallel branch in a larger universe, with additional “rays” to provide reflection into that universe. <span class="math inline">\(\mu\)</span> thus acts like a sort of <em>prism</em> (in fact, an <em>endoprism</em>) that continuously projects inductive values onto their induction principle, giving rise to the eponymous <em>prismatic constructions</em>.</p>
<p>This generalization can be applied to model many common cases which previously required the introduction of abstract-only inductive types, including but not limited to : general dependent inductive types, complete with recursive and inductive-inductive types; co-inductive types and their associated semantics; and even some kinds of quotient types, though the full scope of those quotient types is still to be discovered.</p>
<h4 id="talk-is-cheap-show-me-the-code">Talk is cheap, show me the code</h4>
<p>From the previous overview, <span class="math inline">\(\mu\)</span> may seem quite complex, but it is actually implemented as an almost linear operation on De Bruijn indices. You can look at <a href="https://github.com/lih/stack-libs/blob/master/capricon/src/Data/CaPriCon.hs">CaPriCon’s Haskell implementation</a> of this model to convince yourself of that. All in all, the whole interpreter/typechecker/pattern-matcher boils down to ~300 lines of index-shifting code.</p>
<p>If you feel hesitant about trusting a bunch of Haskell functions written by a stranger on the Internet, don’t hesitate to start hijacking bits of it to write CaPriCon interepreters of your own, in your language of choice. Mine just happens to be Haskell, but maybe yours will bring something new and interesting to the table as well.</p>
<h2 id="contributing-to-wiqee-or-creating-your-own">Contributing to WiQEE, or creating your own</h2>
<p>It goes without saying that I encourage you to contribute to WiQEE in any way you’d like. You may find the project template for this site <a href="https://github.com/lih/WiQEE">in this Git repository</a>, and the source for the actual pages in this <a href="https://github.com/lih/WiQEE-pages">other Git repository</a>.</p>
<p>If you want to contribute to this specific site, you can use the power of Pull Requests on the WiQEE-pages repository (the second one). I can’t promise an immediate reply, but I’m working on automating the builds to allow every contributor to participate, without needing my validation at every turn.</p>
<p>If like me you lack that sort of patience, you can also test your pages by running your own version of this site (how exciting !). To do so, you have to clone the first repository, apply your modifications in the <code>src/pages</code> subdirectory, and run <code>make</code> over the whole thing. You’ll need Pandoc and Sass to be installed, for Markdown and SCSS processing, as well as CaPriCon for obvious reasons. Once <code>make</code> has run its course, you should find a workable HTML version of your WiQEE in the <code>public</code> subdirectory.</p>
<h2 id="example-pages">Example pages</h2>
<p>The basics :</p>
<ul>
<li><a href="Booleans.html">Booleans</a></li>
<li><a href="Equalities.html">Equalities</a></li>
<li><a href="Naturals.html">Natural numbers</a></li>
<li><a href="Lists.html">Lists</a></li>
<li><a href="Relations.html">Relations</a></li>
</ul>
      <div id="footer">Page generated on Thursday, April 11 of 2019, at 20:08 PM UTC, using capricon-0.13 and pandoc-2.7.2.</div>
</div></div></div>
<script id="capricon-prelude" type="text/plain">'nop { { } } def 'get { nop nop lookup } def  'each list 1 dupn get def 'dict-keys dict 'keys get def 'import-keys {   { 1 dupn 1 dupn get def } each   pop } def  'import {   dup dict-keys import-keys  } def  [ dict term-index construction query context io list arith string ] { import } each  'printf { format print pop } def 'show { "%v\n" printf } def 'show-stack { stack { show } each } def 'times { range { pop dup exec } each pop } def 'reverse { [ ] swap { cons } each } def  'eol. { } def 'mustache. { show } def 'tex { 'mustache. { "$%l$\n" printf 'mustache. ,{ dup $ } def } def } def 'svg { 'mustache. { "<svg class='capricon-formula' width='150px' height='2em' viewBox='0 0 100 100' xmlns=\"http://www.w3.org/2000/svg\"><text class='formula-text' x='0' y='100'>%g</text></svg>" printf 'mustache. ,{ dup $ } def } def } def 'raw { 'mustache. { "%s\n" printf 'mustache. ,{ dup $ } def } def } def 'br { "<br/>" print } def  'collect { { 'exports empty def ${ } exports { ,{ ,{ vocabulary } } set-vocabulary ,{ ,{ stack } } set-stack ,{ exports } } exec } exec } def 'exports empty def 'export { exports swap dup $ insert 'exports swap def } def  [ 'source-dir 'output-dir 'cache-dir ] { "" def } each  'module { source-dir "%s%s" format source exec } def 'require { dup dup "  * Required module: [%s][:%s]\n" printf { ,{ dup } { module } collect } swap cache-dir "%s%s.mdo" format cache } def   </script>
<div id="capricon-console"></div>
<script type="text/javascript">
  window.addEventListener("load",function() {
      var formulae = document.getElementsByClassName('capricon-formula');
      for(var i = 0; i < formulae.length; i++) {
	  var formula = formulae.item(i);
	  var box = formula.getBBox();
	  var w = Math.ceil(box.width)*1.05; h = Math.ceil(box.height)*1.05;
	  var x = Math.floor(box.x), y = Math.floor(box.y);
	  
	  formula.setAttribute("viewBox", x+" "+y+" "+w+" "+h);
	  formula.setAttribute("width", w);
	  formula.setAttribute("height", h);
      }
  });
</script>
<div id="body-theme-chooser" style="z-index: 100; position: fixed; text-align: right; right: 0; bottom: 0; font-size: 1rem !important" class="opaque sheet frame level-12">
  <script>
    document.addEventListener('DOMContentLoaded',function() {
	Theme.attach(document.getElementsByTagName('body')[0]);
    });
  </script>
  <button onclick="Theme.setProp('light', !(Theme.getPropVal('light'))).updateElement(null)">Invert Lights</button>
  <select class="theme-ambiance-select">
    <option value="day" selected="selected">Day</option>
    <option value="night">Night</option>
  </select>
  <style>.theme-prop-display { min-width: 4em; display: inline-block; }</style>
  <label class="theme-slider" style="display: block">Primary hue<input type="range" min="0" max="360" value="180"/><span class="theme-prop-display" data-prop-name="--prim-hue"></span></label>	
  <label class="theme-slider" style="display: block">Primary saturation<input type="range" min="0" max="100" value="50" /><span class="theme-prop-display" data-prop-name="--prim-saturation"></span></label>
  <label class="theme-slider" style="display: block">Low hue<input type="range" min="-180" max="180" value="0"/><span class="theme-prop-display" data-prop-name="--low-hue"></span></label>	
  <label class="theme-slider" style="display: block">Low saturation<input type="range" min="0" max="100" value="50"/><span class="theme-prop-display" data-prop-name="--low-saturation"></span></label>
  <label class="theme-slider" style="display: block">High hue<input type="range" min="-180" max="180" value="0"/><span class="theme-prop-display" data-prop-name="--high-hue"></span></label>	
  <label class="theme-slider" style="display: block">High saturation<input type="range" min="0" max="100" value="50"/><span class="theme-prop-display" data-prop-name="--high-saturation"></span></label>
  <label class="theme-slider" style="display: block">Min contrast<input type="range" min="10" max="100" value="50" /><span class="theme-prop-display" data-prop-name="--min-contrast"></span></label>
  <label class="theme-slider" style="display: block">Max contrast<input type="range" min="10" max="100" value="0" /><span class="theme-prop-display" data-prop-name="--max-contrast"></span></label>
  <label class="theme-slider" style="display: block">Luminosity<input type="range" min="0" max="100" value="180"/><span class="theme-prop-display" data-prop-name="--luminosity"></span></label>
</div>
</body>
</html>
